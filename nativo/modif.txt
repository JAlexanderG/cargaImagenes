using (var memoryStream = new MemoryStream(imagenYaEnByte)) // ðŸ”¥ Convertir byte[] a Stream
using (var originalImage = new Bitmap(memoryStream))
{
    int width = originalImage.Width;
    int height = originalImage.Height;
    int maxByteFirma = 2048; // El mismo valor que usa LeadTools

    // ðŸ”¥ Simular el cÃ¡lculo de LeadTools para ajustar tamaÃ±o
    int valorTotal = (height * width) / 8;
    byte[] imageData;

    if (valorTotal > maxByteFirma)
    {
        int newWidth = (int)(Math.Sqrt(maxByteFirma * 8 * width / height)) + 200;
        int newHeight = (int)(newWidth * height / width);

        using (var resizedImage = new Bitmap(originalImage, new Size(newWidth, newHeight)))
        using (var outputMemoryStream = new MemoryStream())
        {
            resizedImage.Save(outputMemoryStream, ImageFormat.Bmp);
            imageData = outputMemoryStream.ToArray();
        }
    }
    else
    {
        using (var outputMemoryStream = new MemoryStream())
        {
            originalImage.Save(outputMemoryStream, ImageFormat.Bmp);
            imageData = outputMemoryStream.ToArray();
        }
    }

    // ðŸ”¥ Ahora `imageData` contiene la imagen procesada y lista para guardar en la base de datos
}
